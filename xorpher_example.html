<script>
    //Simply reload the page to see the result;

    const xorpher = () => { let e = {}, $ = e => { let l = (e, $) => e >>> $ | e << 32 - $, _ = Math.pow, o = _(2, 32), n = "length", c, h, i = "", f = [], a = 8 * e[n], g = $.h = $.h || [], d = $.k = $.k || [], s = d[n], u = {}; for (let C = 2; s < 64; C++)if (!u[C]) { for (c = 0; c < 313; c += C)u[c] = C; g[s] = _(C, .5) * o | 0, d[s++] = _(C, 1 / 3) * o | 0 } for (e += "\x80"; e[n] % 64 - 56;)e += "\0"; for (c = 0; c < e[n]; c++) { if ((h = e.charCodeAt(c)) >> 8) return; f[c >> 2] |= h << (3 - c) % 4 * 8 } for (h = 0, f[f[n]] = a / o | 0, f[f[n]] = a; h < f[n];) { let A = f.slice(h, h += 16), p = g; for (c = 0, g = g.slice(0, 8); c < 64; c++) { let S = A[c - 15], m = A[c - 2], w = g[0], x = g[4], y = g[7] + (l(x, 6) ^ l(x, 11) ^ l(x, 25)) + (x & g[5] ^ ~x & g[6]) + d[c] + (A[c] = c < 16 ? A[c] : A[c - 16] + (l(S, 7) ^ l(S, 18) ^ S >>> 3) + A[c - 7] + (l(m, 17) ^ l(m, 19) ^ m >>> 10) | 0), k = (l(w, 2) ^ l(w, 13) ^ l(w, 22)) + (w & g[1] ^ w & g[2] ^ g[1] & g[2]); (g = [y + k | 0].concat(g))[4] = g[4] + y | 0 } for (c = 0; c < 8; c++)g[c] = g[c] + p[c] | 0 } for (c = 0; c < 8; c++)for (h = 3; h + 1; h--) { let v = g[c] >> 8 * h & 255; i += (v < 16 ? 0 : "") + v.toString(16) } return i }, l = (e, $) => { let l = 0; for (let _ = 0; _ < $; _++)l > e - 1 ? l = 0 : l++; return l }, _ = 1, o = 1, n = (e = 1e3) => (r = (t = new Date().getTime()) / _ / (o + 1) % e, _++, o = r, parseInt(r)), c = (e = 0, _ = 0, o) => { try { let c = ""; e = 1 == o ? e.toString() + $(encodeURIComponent(e.toString())) + "0000" : e.toString(); let h = 1 == o ? e.length : e.length - 1, i = _.length, f = $(_ + h), a = f, g = i, d = h + i, s = a[l(f.length, i)].charCodeAt(0), u = l(h, s), C = e[u + 1], A = $(u); 2 == o && (e = e.slice(0, u + 1) + e.slice(u + 2)), h = e.length; let p = new Date().getMilliseconds() + n(); for (let S = 0; S < h; S++) { g < a.length - 1 ? g++ : g = 0; let m = 1 == o ? p : C.charCodeAt(0), w = e.charCodeAt(S), x = a[g].charCodeAt(0) + i + m + S + g; var y = A[g]; A = x; let k = w ^ x; a = $(x + d + _ + S + h + i + y + f[parseInt(g)].charCodeAt(0)), d += x * g * h * i + S, g = Math.abs(g - x), c += String.fromCharCode(k), 1 == o && S == u && (c += String.fromCharCode(m)) } if (1 == o) return c; { let v = $(encodeURIComponent(c.slice(0, -68))); if (c.slice(-68, -4) == v) return c.slice(0, -68); return null } } catch (b) { return null } }; return e.encrypt = (e, $) => c(e, $, 1), e.decrypt = (e, $) => c(e, $, 2), e };
    let encrypted = xorpher().encrypt("That's my secret message! ðŸ˜€", "M4aKV#C20%q1Hq&V");
    console.log(encrypted);

    let decrypted = xorpher().decrypt(encrypted, "M4aKV#C20%q1Hq&V");
    console.log(decrypted); //That's my secret message! ðŸ˜€
    
</script>
